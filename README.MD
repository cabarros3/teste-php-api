# üåø API Horta Comunit√°ria (PHP Native)

Sistema de gerenciamento para Horta Comunit√°ria, desenvolvido com **PHP puro (sem frameworks)**, estruturado como uma **REST API**. O projeto separa as responsabilidades entre Backend (Regras de neg√≥cio/Banco) e Frontend (HTML/JS).

## üöÄ Tecnologias Utilizadas

- **PHP 8+** (Backend e API)
- **MySQL** (Banco de Dados)
- **PDO** (Conex√£o segura com o banco)
- **HTML5 / CSS3 / Javascript (Fetch API)** (Frontend)
- **Insomnia / Postman** (Para testes de rotas)

---

## üìÇ Estrutura de Pastas

O projeto segue uma arquitetura organizada para facilitar a manuten√ß√£o:

```text
teste-php-api/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ voluntarios/    # CRUD de Volunt√°rios (create, read, update, delete)
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cors.php        # Configura√ß√£o de permiss√µes (CORS)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.php       # Fun√ß√µes √∫teis (padroniza√ß√£o de respostas JSON)
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db.php          # Conex√£o com o banco (PDO)
‚îÇ   ‚îî‚îÄ‚îÄ config.php          # (CRIAR MANUALMENTE) Credenciais do banco
‚îú‚îÄ‚îÄ frontend/               # Telas e interfaces do usu√°rio
‚îî‚îÄ‚îÄ README.md

```

## ‚öôÔ∏è Configura√ß√£o Inicial (Passo a Passo)

Como estamos escondendo as senhas por seguran√ßa, voc√™ precisa configurar seu ambiente local.

1. Banco de Dados
   Certifique-se de ter o MySQL rodando e crie o banco de dados:

```SQL

CREATE DATABASE horta_comunitaria;

```

(Importe as tabelas do script SQL do projeto para criar a tabela voluntario e outras).

2. Configurar Credenciais (Importante! ‚ö†Ô∏è)
   O arquivo de senhas n√£o √© enviado para o GitHub. Voc√™ precisa cri√°-lo manualmente.

V√° na pasta backend/.

Crie um arquivo chamado config.php.

Cole o seguinte c√≥digo e coloque sua senha do MySQL:

```php
<?php
define('DB_HOST', 'localhost:3306');
define('DB_NAME', 'horta_comunitaria');
define('DB_USER', 'root');
define('DB_PASS', 'sua_senha_aqui'); // <-- Coloque sua senha
?>
```

## ‚ö° Como Rodar o Projeto

A maneira mais f√°cil de rodar sem configurar Apache/XAMPP complexos √© usando o servidor embutido do PHP.

Abra o terminal na pasta raiz do projeto (teste-php-api).

Execute o comando:

```bash
php -S localhost:8000
```

O servidor estar√° rodando!

API: http://localhost:8000/backend/api/...

Frontend: http://localhost:8000/frontend/

## üîå Endpoints da API

Abaixo est√£o as rotas dispon√≠veis no sistema. Lembre-se que todas as respostas s√£o em JSON.

### üßë‚Äçüåæ Volunt√°rios

| M√©todo     | URL (Endpoint)                        | Descri√ß√£o                  | Exemplo de JSON (Body)                                                   |
| :--------- | :------------------------------------ | :------------------------- | :----------------------------------------------------------------------- |
| **GET**    | `/backend/api/voluntarios/`           | Lista todos os volunt√°rios | _(Vazio)_                                                                |
| **POST**   | `/backend/api/voluntarios/create.php` | Cadastra novo volunt√°rio   | `{"nome_voluntario": "Ana", "funcao": "Regar"}`                          |
| **PUT**    | `/backend/api/voluntarios/update.php` | Atualiza dados             | `{"voluntario_id": 1, "nome_voluntario": "Ana B.", "funcao": "Plantio"}` |
| **DELETE** | `/backend/api/voluntarios/delete.php` | Remove um volunt√°rio       | `{"voluntario_id": 1}`                                                   |

### üå± Canteiros

| M√©todo     | URL (Endpoint)                      | Descri√ß√£o                | Exemplo de JSON (Body)                                                                   |
| :--------- | :---------------------------------- | :----------------------- | :--------------------------------------------------------------------------------------- |
| **GET**    | `/backend/api/canteiros/`           | Lista todos os canteiros | _(Vazio)_                                                                                |
| **POST**   | `/backend/api/canteiros/create.php` | Cria canteiro            | `{"nome_canteiro": "Canteiro A", "localizacao": "Norte", "tamanho": 10.5}`               |
| **PUT**    | `/backend/api/canteiros/update.php` | Atualiza canteiro        | `{"canteiro_id": 2, "nome_canteiro": "Canteiro B", "localizacao": "Sul", "tamanho": 12}` |
| **DELETE** | `/backend/api/canteiros/delete.php` | Remove canteiro          | `{"canteiro_id": 2}`                                                                     |

### üåø Plantas

| M√©todo     | URL (Endpoint)                    | Descri√ß√£o              | Exemplo de JSON (Body)                                                       |
| :--------- | :-------------------------------- | :--------------------- | :--------------------------------------------------------------------------- |
| **GET**    | `/backend/api/plantas/`           | Lista todas as plantas | _(Vazio)_                                                                    |
| **POST**   | `/backend/api/plantas/create.php` | Cadastra planta        | `{"nome_planta": "Alface", "tempo_cultivo": "45 dias"}`                      |
| **PUT**    | `/backend/api/plantas/update.php` | Atualiza planta        | `{"planta_id": 5, "nome_planta": "Alface Roxa", "tempo_cultivo": "50 dias"}` |
| **DELETE** | `/backend/api/plantas/delete.php` | Remove planta          | `{"planta_id": 5}`                                                           |

### üöú Cultivos

| M√©todo     | URL (Endpoint)                     | Descri√ß√£o        | Exemplo de JSON (Body)                                                                                   |
| :--------- | :--------------------------------- | :--------------- | :------------------------------------------------------------------------------------------------------- |
| **GET**    | `/backend/api/cultivos/`           | Lista cultivos   | _(Vazio)_                                                                                                |
| **POST**   | `/backend/api/cultivos/create.php` | Inicia cultivo   | `{"data_cultivo": "2025-11-20", "voluntario_id": 1, "canteiro_id": 2, "planta_id": 5}`                   |
| **PUT**    | `/backend/api/cultivos/update.php` | Atualiza cultivo | `{"cultivo_id": 10, "data_cultivo": "2025-11-21", "voluntario_id": 1, "canteiro_id": 2, "planta_id": 5}` |
| **DELETE** | `/backend/api/cultivos/delete.php` | Remove cultivo   | `{"cultivo_id": 10}`                                                                                     |

## üõ°Ô∏è Padr√µes de Resposta

A API sempre retorna JSON seguindo este padr√£o para facilitar o Frontend:

Sucesso

```json
{
  "status": "sucesso",
  "mensagem": "Opera√ß√£o realizada!",
  "dados": [ ... ]
}
```

Erro:

```json
{
  "status": "erro",
  "mensagem": "Descri√ß√£o do erro",
  "dados": null
}
```

## ü§ù Contribui√ß√£o

Garanta que o arquivo backend/config.php esteja no seu .gitignore.

Mantenha a padroniza√ß√£o das respostas JSON usando a fun√ß√£o enviarResposta().
